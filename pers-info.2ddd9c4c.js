function asyncGeneratorStep(t,e,r,n,c,o,a){try{var s=t[o](a),u=s.value}catch(t){r(t);return}s.done?e(u):Promise.resolve(u).then(n,c)}function _async_to_generator(t){return function(){var e=this,r=arguments;return new Promise(function(n,c){var o=t.apply(e,r);function a(t){asyncGeneratorStep(o,n,c,a,s,"next",t)}function s(t){asyncGeneratorStep(o,n,c,a,s,"throw",t)}a(void 0)})}}function _define_property(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _object_spread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){_define_property(t,e,r[e])})}return t}function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function _object_spread_props(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ownKeys(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}function _ts_generator(t,e){var r,n,c,o={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var i=[s,u];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(o=0)),o;)try{if(r=1,n&&(c=2&i[0]?n.return:i[0]?n.throw||((c=n.return)&&c.call(n),0):n.next)&&!(c=c.call(n,i[1])).done)return c;switch(n=0,c&&(i=[2&i[0],c.value]),i[0]){case 0:case 1:c=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(c=(c=o.trys).length>0&&c[c.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!c||i[1]>c[0]&&i[1]<c[3])){o.label=i[1];break}if(6===i[0]&&o.label<c[1]){o.label=c[1],c=i;break}if(c&&o.label<c[2]){o.label=c[2],o.ops.push(i);break}c[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(t){i=[6,t],n=0}finally{r=c=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}}var catalogContainer=document.querySelector(".catalog-cntr"),API_BASE_URL="https://tech-showcase-store.onrender.com/api";function fetchProducts(){return _async_to_generator(function(){var t;return _ts_generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,fetch("${API_BASE_URL}/products")];case 1:if(!(t=e.sent()).ok)throw Error("Error HTTP: ".concat(t.status));return[4,t.json()];case 2:return renderProducts(e.sent()),[3,4];case 3:return console.error("Error loading product list:",e.sent()),[3,4];case 4:return[2]}})})()}function addToCart(t){var e=JSON.parse(localStorage.getItem("cart"))||[],r=e.findIndex(function(e){return e._id===t._id});r>=0?e[r].quantity+=1:e.push(_object_spread_props(_object_spread({},t),{quantity:1})),localStorage.setItem("cart",JSON.stringify(e)),updateCartCounter()}function updateCartCounter(){var t=(JSON.parse(localStorage.getItem("cart"))||[]).reduce(function(t,e){return t+e.quantity},0),e=document.querySelector(".icon__quantity");e&&(e.textContent=t)}function renderProducts(t){var e=document.querySelector(".catalog-cntr");if(!e)return void console.error("Error: container .catalog-cntr not found");console.log("RENDER"),e.innerHTML="",t.forEach(function(t){var r='\n      <article class="product">\n        '.concat("new"===t.type?'<span class="product-prop product__prop new">New</span>':"",'\n        <div class="product__top">\n          <img src="').concat(t.picture?"data:image/jpeg;base64,".concat(t.picture):"placeholder.jpg",'"\n               alt="').concat(t.name,'"\n               class="product__image">\n        </div>\n        <h2 class="product__title">\n          <a href="product.html?id=').concat(t._id,'" class="product-link">\n            ').concat(t.name,'\n          </a>\n        </h2>\n        <p class="product__code">Product code: ').concat(t._id||"N/A",'</p>\n        <p class="product__price">\n          <span class="product__price-name">Price:</span>\n          <span class="product__price-value">$').concat(t.price||"0.00",'</span>\n        </p>\n        <button class="product__button buy-btn" data-product-id="').concat(t._id,'">Buy</button>\n      </article>');e.insertAdjacentHTML("beforeend",r)}),console.log("RENDER2"),console.log("add to buy button"),document.querySelectorAll(".buy-btn").forEach(function(t){t.addEventListener("click",function(){return _async_to_generator(function(){var t,e,r;return _ts_generator(this,function(n){switch(n.label){case 0:console.log("Product id",t=this.getAttribute("data-product-id")),n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch("".concat(API_BASE_URL,"/products/").concat(t))];case 2:return[4,(e=n.sent()).json()];case 3:if(r=n.sent(),!e.ok)throw Error("Product not found");return addToCart(r),[3,5];case 4:return console.error("Ошибка при загрузке данных о товаре:",n.sent()),[3,5];case 5:return[2]}})}).call(this)})}),updateCartCounter()}function fetchRelatedProducts(){return _async_to_generator(function(){return _ts_generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,fetch("${API_BASE_URL}/products/related-products")];case 1:return[4,t.sent().json()];case 2:return updateProductList(t.sent()),[3,4];case 3:return console.error("Ошибка при загрузке данных о товарах:",t.sent()),[3,4];case 4:return[2]}})})()}function updateProductList(t){var e=document.querySelector(".card-related__content");e.innerHTML="",t.forEach(function(t){var r=createProductCard(t);e.appendChild(r)})}document.addEventListener("DOMContentLoaded",fetchProducts),document.addEventListener("DOMContentLoaded",function(){var t=document.querySelectorAll(".menu__nav .nav__link"),e=document.querySelector(".catalog-cntr");t.forEach(function(t){t.addEventListener("click",function(r){return _async_to_generator(function(){var n,c;return _ts_generator(this,function(o){switch(o.label){case 0:r.preventDefault(),n=t.dataset.category,o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch("".concat(API_BASE_URL,"/products/filter?type=").concat(n))];case 2:return[4,o.sent().json()];case 3:return c=o.sent(),e.innerHTML="",c.forEach(function(t){var r='\n            <article class="product">\n              '.concat("new"===t.type?'<span class="product-prop product__prop new">New</span>':"",'\n                <div class="product__top">\n                  <img src="').concat(t.picture?"data:image/jpeg;base64,".concat(t.picture):"placeholder.jpg",'"\n                        alt="').concat(t.name,'"\n                        class="product__image">\n                </div>\n                <h2 class="product__title">\n                  <a href="product.html?id=').concat(t._id,'" class="product-link" data-id="').concat(t._id,'">\n                    ').concat(t.name,'\n                  </a>\n                </h2>\n                <p class="product__code">Product code: ').concat(t._id||"N/A",'</p>\n                <p class="product__price">\n                  <span class="product__price-name">Price:</span>\n                  <span class="product__price-value">$').concat(t.price||"0.00",'</span>\n                </p>\n                <a href="#" class="product__button" data-qa="product-hover">Buy</a>\n            </article>');e.insertAdjacentHTML("beforeend",r)}),[3,5];case 4:return console.error("Ошибка при загрузке товаров:",o.sent()),[3,5];case 5:return[2]}})})()})})}),document.addEventListener("DOMContentLoaded",function(){try{var t=document.querySelectorAll(".catalog-filter__items .custom-checkbox__input"),e=document.querySelector(".catalog-cntr");if(!e)return void console.error("Элемент .catalog-cntr не найден!");var r=function(){var e=[];return t.forEach(function(t){if(t.checked){var r=t.closest(".custom-checkbox").dataset.text;e.push(r)}}),e},n=function(){return _async_to_generator(function(){var t,n,c,o,a;return _ts_generator(this,function(s){switch(s.label){case 0:t=r(),s.label=1;case 1:return s.trys.push([1,4,,5]),n=t.length?"?subCategory=".concat(t.join(",")):"",[4,fetch("".concat(API_BASE_URL,"/products/filter").concat(n))];case 2:return c=s.sent(),[4,c.json()];case 3:return o=s.sent(),e.innerHTML="",o.forEach(function(t){var r='\n              <article class="product">\n                '.concat("new"===t.type?'<span class="product-prop product__prop new">New</span>':"",'\n                  <div class="product__top">\n                    <img src="').concat(t.picture?"data:image/jpeg;base64,".concat(t.picture):"placeholder.jpg",'"\n                          alt="').concat(t.name,'"\n                          class="product__image">\n                  </div>\n                  <h2 class="product__title">\n                    <a href="product.html?id=').concat(t._id,'" class="product-link" data-id="').concat(t._id,'">\n                      ').concat(t.name,'\n                    </a>\n                  </h2>\n                  <p class="product__code">Product code: ').concat(t._id||"N/A",'</p>\n                  <p class="product__price">\n                    <span class="product__price-name">Price:</span>\n                    <span class="product__price-value">$').concat(t.price||"0.00",'</span>\n                  </p>\n                  <a href="#" class="product__button" data-qa="product-hover">Buy</a>\n              </article>');e.insertAdjacentHTML("beforeend",r)}),[3,5];case 4:return a=s.sent(),console.error("Ошибка при загрузке товаров:",a),[3,5];case 5:return[2]}})})()};t.forEach(function(t){t.addEventListener("change",n)}),n()}catch(t){console.log(t)}}),document.addEventListener("DOMContentLoaded",function(){var t=function(t){r.innerHTML="",t.forEach(function(t){var e='\n        <article class="product">\n          '.concat("new"===t.type?'<span class="product-prop product__prop new">New</span>':"",'\n          <div class="product__top">\n            <img src="').concat(t.picture?"data:image/jpeg;base64,".concat(t.picture):"placeholder.jpg",'"\n                 alt="').concat(t.name,'"\n                 class="product__image">\n          </div>\n          <h2 class="product__title">\n            <a href="product.html?id=').concat(t._id,'" class="product-link" data-id="').concat(t._id,'">\n              ').concat(t.name,'\n            </a>\n          </h2>\n          <p class="product__code">Product code: ').concat(t._id||"N/A",'</p>\n          <p class="product__price">\n            <span class="product__price-name">Price:</span>\n            <span class="product__price-value">$').concat(t.price||"0.00",'</span>\n          </p>\n          <a href="#" class="product__button" data-qa="product-hover">Buy</a>\n        </article>');r.insertAdjacentHTML("beforeend",e)})},e=document.getElementById("color-filter"),r=document.querySelector(".catalog-cntr");if(!e||!r)return void console.error('Элемент с ID "color-filter" не найден');e.addEventListener("change",function(r){return _async_to_generator(function(){var n;return _ts_generator(this,function(c){switch(c.label){case 0:if(!r.target.classList.contains("custom-checkbox__input"))return[3,5];n=Array.from(e.querySelectorAll("input:checked")).map(function(t){return t.closest("label").dataset.text}),c.label=1;case 1:return c.trys.push([1,4,,5]),[4,fetch("".concat(API_BASE_URL,"/products/filter?color=").concat(n.join(",")))];case 2:return[4,c.sent().json()];case 3:return t(c.sent()),[3,5];case 4:return console.error("Ошибка при фильтрации:",c.sent()),[3,5];case 5:return[2]}})})()})}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".product__buy-btn").forEach(function(t){t.addEventListener("click",function(t){return _async_to_generator(function(){var e;return _ts_generator(this,function(r){switch(r.label){case 0:e=t.target.getAttribute("data-product-id"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,fetch("${API_BASE_URL}/cart/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e})})];case 2:if(!r.sent().ok)throw Error("Error adding product to cart");return[3,4];case 3:return console.error("Error adding to cart:",r.sent()),[3,4];case 4:return[2]}})})()})})});
//# sourceMappingURL=pers-info.2ddd9c4c.js.map
