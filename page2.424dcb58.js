!function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},n={},c=t.parcelRequire79d6;null==c&&((c=function(t){if(t in e)return e[t].exports;if(t in n){var c=n[t];delete n[t];var r={id:t,exports:{}};return e[t]=r,c.call(r.exports,r,r.exports),r.exports}var o=Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){n[t]=e},t.parcelRequire79d6=c),(0,c.register)("YtE9h",function(t,e){var n;function c(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}n=t.exports,Object.defineProperty(n,"_",{get:function(){return c},set:void 0,enumerable:!0,configurable:!0})});var r=c("7k5I8"),o=c("lFlDF");document.querySelector(".catalog-cntr");var a="https://tech-showcase-store.onrender.com/api";function s(){var t=(JSON.parse(localStorage.getItem("cart"))||[]).reduce(function(t,e){return t+e.quantity},0),e=document.querySelector(".icon__quantity");e&&(e.textContent=t)}document.addEventListener("DOMContentLoaded",function(){return(0,r._)(function(){var t;return(0,o.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,fetch("${API_BASE_URL}/products")];case 1:if(!(t=e.sent()).ok)throw Error("Error HTTP: ".concat(t.status));return[4,t.json()];case 2:return function(t){var e=document.querySelector(".catalog-cntr");if(!e)return console.error("Error: container .catalog-cntr not found");console.log("RENDER"),e.innerHTML="",t.forEach(function(t){var n='\n      <article class="product">\n        '.concat("new"===t.type?'<span class="product-prop product__prop new">New</span>':"",'\n        <div class="product__top">\n          <img src="').concat(t.picture?"data:image/jpeg;base64,".concat(t.picture):"placeholder.jpg",'"\n               alt="').concat(t.name,'"\n               class="product__image">\n        </div>\n        <h2 class="product__title">\n          <a href="product.html?id=').concat(t._id,'" class="product-link">\n            ').concat(t.name,'\n          </a>\n        </h2>\n        <p class="product__code">Product code: ').concat(t._id||"N/A",'</p>\n        <p class="product__price">\n          <span class="product__price-name">Price:</span>\n          <span class="product__price-value">$').concat(t.price||"0.00",'</span>\n        </p>\n        <button class="product__button buy-btn" data-product-id="').concat(t._id,'">Buy</button>\n      </article>');e.insertAdjacentHTML("beforeend",n)}),console.log("RENDER2"),console.log("add to buy button"),document.querySelectorAll(".buy-btn").forEach(function(t){t.addEventListener("click",function(){return(0,r._)(function(){var t,e,n;return(0,o.__generator)(this,function(c){switch(c.label){case 0:console.log("Product id",t=this.getAttribute("data-product-id")),c.label=1;case 1:return c.trys.push([1,4,,5]),[4,fetch("".concat(a,"/products/").concat(t))];case 2:return[4,(e=c.sent()).json()];case 3:if(n=c.sent(),!e.ok)throw Error("Product not found");var r,o,u=JSON.parse(localStorage.getItem("cart"))||[],i=u.findIndex(function(t){return t._id===n._id});return i>=0?u[i].quantity+=1:u.push((r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},c=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(c=c.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),c.forEach(function(e){var c;c=n[e],e in t?Object.defineProperty(t,e,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[e]=c})}return t}({},n),o=o={quantity:1},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);n.push.apply(n,c)}return n})(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))}),r)),localStorage.setItem("cart",JSON.stringify(u)),s(),[3,5];case 4:return console.error("Ошибка при загрузке данных о товаре:",c.sent()),[3,5];case 5:return[2]}})}).call(this)})}),s()}(e.sent()),[3,4];case 3:return console.error("Error loading product list:",e.sent()),[3,4];case 4:return[2]}})})()}),document.addEventListener("DOMContentLoaded",function(){var t=document.querySelectorAll(".menu__nav .nav__link"),e=document.querySelector(".catalog-cntr");t.forEach(function(t){t.addEventListener("click",function(n){return(0,r._)(function(){var c,r;return(0,o.__generator)(this,function(o){switch(o.label){case 0:n.preventDefault(),c=t.dataset.category,o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch("".concat(a,"/products/filter?type=").concat(c))];case 2:return[4,o.sent().json()];case 3:return r=o.sent(),e.innerHTML="",r.forEach(function(t){var n='\n            <article class="product">\n              '.concat("new"===t.type?'<span class="product-prop product__prop new">New</span>':"",'\n                <div class="product__top">\n                  <img src="').concat(t.picture?"data:image/jpeg;base64,".concat(t.picture):"placeholder.jpg",'"\n                        alt="').concat(t.name,'"\n                        class="product__image">\n                </div>\n                <h2 class="product__title">\n                  <a href="product.html?id=').concat(t._id,'" class="product-link" data-id="').concat(t._id,'">\n                    ').concat(t.name,'\n                  </a>\n                </h2>\n                <p class="product__code">Product code: ').concat(t._id||"N/A",'</p>\n                <p class="product__price">\n                  <span class="product__price-name">Price:</span>\n                  <span class="product__price-value">$').concat(t.price||"0.00",'</span>\n                </p>\n                <a href="#" class="product__button" data-qa="product-hover">Buy</a>\n            </article>');e.insertAdjacentHTML("beforeend",n)}),[3,5];case 4:return console.error("Ошибка при загрузке товаров:",o.sent()),[3,5];case 5:return[2]}})})()})})}),document.addEventListener("DOMContentLoaded",function(){try{var t=document.querySelectorAll(".catalog-filter__items .custom-checkbox__input"),e=document.querySelector(".catalog-cntr");if(!e)return void console.error("Элемент .catalog-cntr не найден!");var n=function(){var e=[];return t.forEach(function(t){if(t.checked){var n=t.closest(".custom-checkbox").dataset.text;e.push(n)}}),e},c=function(){return(0,r._)(function(){var t,c,r,s,u;return(0,o.__generator)(this,function(o){switch(o.label){case 0:t=n(),o.label=1;case 1:return o.trys.push([1,4,,5]),c=t.length?"?subCategory=".concat(t.join(",")):"",[4,fetch("".concat(a,"/products/filter").concat(c))];case 2:return r=o.sent(),[4,r.json()];case 3:return s=o.sent(),e.innerHTML="",s.forEach(function(t){var n='\n              <article class="product">\n                '.concat("new"===t.type?'<span class="product-prop product__prop new">New</span>':"",'\n                  <div class="product__top">\n                    <img src="').concat(t.picture?"data:image/jpeg;base64,".concat(t.picture):"placeholder.jpg",'"\n                          alt="').concat(t.name,'"\n                          class="product__image">\n                  </div>\n                  <h2 class="product__title">\n                    <a href="product.html?id=').concat(t._id,'" class="product-link" data-id="').concat(t._id,'">\n                      ').concat(t.name,'\n                    </a>\n                  </h2>\n                  <p class="product__code">Product code: ').concat(t._id||"N/A",'</p>\n                  <p class="product__price">\n                    <span class="product__price-name">Price:</span>\n                    <span class="product__price-value">$').concat(t.price||"0.00",'</span>\n                  </p>\n                  <a href="#" class="product__button" data-qa="product-hover">Buy</a>\n              </article>');e.insertAdjacentHTML("beforeend",n)}),[3,5];case 4:return u=o.sent(),console.error("Ошибка при загрузке товаров:",u),[3,5];case 5:return[2]}})})()};t.forEach(function(t){t.addEventListener("change",c)}),c()}catch(t){console.log(t)}}),document.addEventListener("DOMContentLoaded",function(){var t=function(t){n.innerHTML="",t.forEach(function(t){var e='\n        <article class="product">\n          '.concat("new"===t.type?'<span class="product-prop product__prop new">New</span>':"",'\n          <div class="product__top">\n            <img src="').concat(t.picture?"data:image/jpeg;base64,".concat(t.picture):"placeholder.jpg",'"\n                 alt="').concat(t.name,'"\n                 class="product__image">\n          </div>\n          <h2 class="product__title">\n            <a href="product.html?id=').concat(t._id,'" class="product-link" data-id="').concat(t._id,'">\n              ').concat(t.name,'\n            </a>\n          </h2>\n          <p class="product__code">Product code: ').concat(t._id||"N/A",'</p>\n          <p class="product__price">\n            <span class="product__price-name">Price:</span>\n            <span class="product__price-value">$').concat(t.price||"0.00",'</span>\n          </p>\n          <a href="#" class="product__button" data-qa="product-hover">Buy</a>\n        </article>');n.insertAdjacentHTML("beforeend",e)})},e=document.getElementById("color-filter"),n=document.querySelector(".catalog-cntr");if(!e||!n)return void console.error('Элемент с ID "color-filter" не найден');e.addEventListener("change",function(n){return(0,r._)(function(){var c;return(0,o.__generator)(this,function(r){switch(r.label){case 0:if(!n.target.classList.contains("custom-checkbox__input"))return[3,5];c=Array.from(e.querySelectorAll("input:checked")).map(function(t){return t.closest("label").dataset.text}),r.label=1;case 1:return r.trys.push([1,4,,5]),[4,fetch("".concat(a,"/products/filter?color=").concat(c.join(",")))];case 2:return[4,r.sent().json()];case 3:return t(r.sent()),[3,5];case 4:return console.error("Ошибка при фильтрации:",r.sent()),[3,5];case 5:return[2]}})})()})}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".product__buy-btn").forEach(function(t){t.addEventListener("click",function(t){return(0,r._)(function(){var e;return(0,o.__generator)(this,function(n){switch(n.label){case 0:e=t.target.getAttribute("data-product-id"),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,fetch("${API_BASE_URL}/cart/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e})})];case 2:if(!n.sent().ok)throw Error("Error adding product to cart");return(0,r._)(function(){var t,e,n;return(0,o.__generator)(this,function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),[4,fetch("${API_BASE_URL}/cart")];case 1:return[4,c.sent().json()];case 2:return t=c.sent(),(e=document.querySelector(".cart__items")).innerHTML="",t.forEach(function(t){var n=document.createElement("div");n.classList.add("cart__item"),n.innerHTML='\n          <img src="'.concat(t.product.picture||"default.jpg",'" class="cart__image">\n          <div class="cart__details">\n            <h2 class="cart__name">').concat(t.product.name,'</h2>\n            <p class="cart__price">$').concat(t.product.price,'</p>\n            <div class="cart__quantity">\n              <button class="cart__btn cart__btn--decrease" data-id="').concat(t.product._id,'">-</button>\n              <span class="cart__quantity-value">').concat(t.quantity,'</span>\n              <button class="cart__btn cart__btn--increase" data-id="').concat(t.product._id,'">+</button>\n            </div>\n          </div>\n        '),e.appendChild(n)}),n=t.reduce(function(t,e){return t+e.product.price*e.quantity},0),document.querySelector(".cart__total-value").textContent="$".concat(n.toFixed(2)),[3,4];case 3:return console.error("Error updating cart:",c.sent()),[3,4];case 4:return[2]}})})(),[3,4];case 3:return console.error("Error adding to cart:",n.sent()),[3,4];case 4:return[2]}})})()})})})}();
//# sourceMappingURL=page2.424dcb58.js.map
